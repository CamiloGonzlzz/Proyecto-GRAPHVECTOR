<!DOCTYPE html>
<html>
<head>
    <title>Vector 3D con Extrapolaciones</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        #grafico { 
            width: 900px; 
            height: 700px; 
            margin: 20px auto;
            border: 1px solid #ddd;
        }
        h1 { text-align: center; color: #333; }
        form { 
            text-align: center; 
            margin-bottom: 20px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        label { margin: 0 10px; }
        input { 
            width: 60px; 
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            padding: 5px 15px;
            background: #4285f4;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Vector 3D con Proyecciones Extrapoladas</h1>
    <form id="vectorForm">
        <label>X: <input type="number" id="inputX" required></label>
        <label>Y: <input type="number" id="inputY" required></label>
        <label>Z: <input type="number" id="inputZ" required></label>
        <button type="submit">Graficar</button>
    </form>
    <div id="grafico"></div>

    <script>
        // Función para graficar usando Plotly
        function graficar(x, y, z) {
            // Vector principal
            const vectorPrincipal = {
                type: 'scatter3d',
                mode: 'lines+markers',
                x: [0, x],
                y: [0, y],
                z: [0, z],
                line: { color: 'red', width: 8 },
                marker: { color: 'black', size: 6 },
                name: 'Vector Principal'
            };

            // Proyecciones extrapoladas
            const extrapolaciones = [
                { x: [x, x], y: [y, y], z: [z, 0], line: { color: 'blue', width: 4, dash: 'dot' }, type: 'scatter3d', mode: 'lines', name: 'Proyección XY' },
                { x: [x, x], y: [y, 0], z: [z, z], line: { color: 'green', width: 4, dash: 'dot' }, type: 'scatter3d', mode: 'lines', name: 'Proyección XZ' },
                { x: [x, 0], y: [y, y], z: [z, z], line: { color: 'purple', width: 4, dash: 'dot' }, type: 'scatter3d', mode: 'lines', name: 'Proyección YZ' }
            ];

            // Componentes del vector
            const componentes = [
                { x: [0, x], y: [0, 0], z: [0, 0], line: { color: 'orange', width: 3 }, type: 'scatter3d', mode: 'lines', name: 'Componente X' },
                { x: [0, 0], y: [0, y], z: [0, 0], line: { color: 'cyan', width: 3 }, type: 'scatter3d', mode: 'lines', name: 'Componente Y' },
                { x: [0, 0], y: [0, 0], z: [0, z], line: { color: 'magenta', width: 3 }, type: 'scatter3d', mode: 'lines', name: 'Componente Z' }
            ];

            const layout = {
                title: 'Descomposición del Vector 3D',
                scene: {
                    xaxis: { title: 'Eje X', backgroundcolor: 'rgba(0,0,0,0)' },
                    yaxis: { title: 'Eje Y', backgroundcolor: 'rgba(0,0,0,0)' },
                    zaxis: { title: 'Eje Z', backgroundcolor: 'rgba(0,0,0,0)' },
                    camera: { eye: { x: 1.5, y: 1.5, z: 0.8 } },
                    aspectmode: 'cube'
                },
                margin: { l: 0, r: 0, b: 0, t: 40 }
            };

            // Eliminar gráfico existente si hay uno
            Plotly.purge('grafico');
            
            Plotly.newPlot(
                'grafico',
                [vectorPrincipal, ...extrapolaciones, ...componentes],
                layout
            );
        }

        // Manejo del formulario
        document.getElementById('vectorForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const x = parseFloat(document.getElementById('inputX').value) || 0;
            const y = parseFloat(document.getElementById('inputY').value) || 0;
            const z = parseFloat(document.getElementById('inputZ').value) || 0;

            graficar(x, y, z);
        });

        // Graficar un ejemplo inicial
        window.onload = function() {
            document.getElementById('inputX').value = 3;
            document.getElementById('inputY').value = 4;
            document.getElementById('inputZ').value = 5;
            graficar(3, 4, 5);
        };
    </script>
</body>
</html>